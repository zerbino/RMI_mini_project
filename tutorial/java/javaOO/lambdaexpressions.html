<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    

<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Lambda Expressions (The Java&trade; Tutorials &gt;        
            Learning the Java Language &gt; Classes and Objects)
</title>

     <meta name="description" content="This beginner Java tutorial describes fundamentals of programming in the Java programming language" />
     <meta name="keywords" content="java programming, learn java, java sample code, java objects, java classes, java inheritance, interfaces, variables, arrays, data types, operators, control flow, number, string" />
        
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: left;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
        margin-right: 10px;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }
    
    #Footer2 {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #F90000;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #F90000;
        font-family: sans-serif;
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
    }
    
    .tocli {
        list-style-type:none;
    }

</style>
<script type="text/javascript">
/* <![CDATA[ */
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }

    function showCode(displayCodePage, codePath) {
        var codePathEls = codePath.split("/");
        var currDocPathEls = location.href.split("/");
        //alert ("codePathEls = " + codePathEls + "\n" + "currDocPathEls = " + currDocPathEls);
        currDocPathEls.pop(); // remove file name at the end
        while (codePathEls.length > 0) {
            if (codePathEls[0] == "..") {
                codePathEls.shift();
                currDocPathEls.pop();
            } else {
                break;
            }
        }
        var fullCodePath = currDocPathEls.join("/") + "/" + codePathEls.join("/");
        //alert ("fullCodePath = " + fullCodePath );
        if (codePath.indexOf(".java") != -1 || codePath.indexOf(".jnlp") != -1) {
            window.location.href = displayCodePage + "?code=" + encodeURI(fullCodePath);
        } else {
            window.location.href = fullCodePath;
        }
    }
/* ]]> */    
</script>


    </head>
<body onload="load()">
    <noscript>
        A browser with JavaScript enabled is required for this page to operate properly.
    </noscript>

    <div id="TopBar"> <div id="TopBar_tr"> <div id="TopBar_tl"> <div id="TopBar_br"> <div id="TopBar_bl"> 
                        <div id="TopBar_right"> 
                            <a target="_blank"
				href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">Download Ebooks</a><br />
                            <a target="_blank"
                                href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Download JDK</a>
                            <br />
                            <a href="../../search.html" target="_blank">Search Java Tutorials</a>
                            <br />
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class="PrintHeaders">
        <b>Trail:</b> Learning the Java Language
        <br /><b>Lesson:</b> Classes and Objects
        <br /><b>Section:</b> Nested Classes
    </div>

    <div id="LeftBar" class="LeftBar_shown">
        <div id="Contents">
            <div class="linkLESSON"><a href="index.html">Classes and Objects</a></div>
<div class="linkAHEAD"><a href="classes.html">Classes</a></div>
<div class="linkBHEAD"><a href="classdecl.html">Declaring Classes</a></div>
<div class="linkBHEAD"><a href="variables.html">Declaring Member Variables</a></div>
<div class="linkBHEAD"><a href="methods.html">Defining Methods</a></div>
<div class="linkBHEAD"><a href="constructors.html">Providing Constructors for Your Classes</a></div>
<div class="linkBHEAD"><a href="arguments.html">Passing Information to a Method or a Constructor</a></div>
<div class="linkAHEAD"><a href="objects.html">Objects</a></div>
<div class="linkBHEAD"><a href="objectcreation.html">Creating Objects</a></div>
<div class="linkBHEAD"><a href="usingobject.html">Using Objects</a></div>
<div class="linkAHEAD"><a href="more.html">More on Classes</a></div>
<div class="linkBHEAD"><a href="returnvalue.html">Returning a Value from a Method</a></div>
<div class="linkBHEAD"><a href="thiskey.html">Using the this Keyword</a></div>
<div class="linkBHEAD"><a href="accesscontrol.html">Controlling Access to Members of a Class</a></div>
<div class="linkBHEAD"><a href="classvars.html">Understanding Instance and Class Members</a></div>
<div class="linkBHEAD"><a href="initial.html">Initializing Fields</a></div>
<div class="linkBHEAD"><a href="summaryclasses.html">Summary of Creating and Using Classes and Objects</a></div>
<div class="linkQUESTIONS"><a href="QandE/creating-questions.html">Questions and Exercises</a></div>
<div class="linkQUESTIONS"><a href="QandE/objects-questions.html">Questions and Exercises</a></div>
<div class="linkAHEAD"><a href="nested.html">Nested Classes</a></div>
<div class="linkBHEAD"><a href="innerclasses.html">Inner Class Example</a></div>
<div class="linkBHEAD"><a href="localclasses.html">Local Classes</a></div>
<div class="linkBHEAD"><a href="anonymousclasses.html">Anonymous Classes</a></div>
<div class="nolinkBHEAD">Lambda Expressions</div>
<div class="linkBHEAD"><a href="whentouse.html">When To Use Nested Classes, Local Classes, Anonymous Classes, and Lambda Expressions </a></div>
<div class="linkQUESTIONS"><a href="QandE/nested-questions.html">Questions and Exercises</a></div>
<div class="linkAHEAD"><a href="enum.html">Enum Types</a></div>
<div class="linkQUESTIONS"><a href="QandE/enum-questions.html">Questions and Exercises</a></div>
</div>
    </div>
    <div id="MainFlow" class="MainFlow_indented">
            <span id="BreadCrumbs">
                <a href="../../index.html" target="_top">Home Page</a>
                &gt;
                <a href="../index.html" target="_top">Learning the Java Language</a>
                &gt;
                <a href="index.html" target="_top">Classes and Objects</a>
            </span>
            <div class="NavBit">
                <a target="_top" href="anonymousclasses.html">&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target="_top" href="../TOC.html">Trail</a>&nbsp;&bull;&nbsp;<a target="_top" href="whentouse.html">Next&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle"><h1>Lambda Expressions</h1></div>
            <div id="PageContent">
<hr/><strong>This section discusses features included in <a href="http://openjdk.java.net/projects/lambda/">Project Lambda</a>, which aims to support programming in a multicore environment by adding closures and related features to the Java language. Project Lambda is part of the upcoming Java SE 8 release. Download the current JDK 8 snapshot that supports these features from <a href="http://jdk8.java.net/lambda/">Java Platform, Standard Edition 8 Early Access with Lambda Support</a>.</strong><hr/> 
<p>One issue about anonymous classes is that if the implementation of your anonymous class is very simple, such as an interface that contains only one method, the syntax of anonymous classes may seem too unwieldy and unclear. In these cases, you're usually trying to pass functionality as an argument to another method, such as what action should be taken when someone clicks a button. Lambda expressions enable you to do this, to treat functionality as method argument, or code as data.</p>

<p>The previous section,
<a class="TutorialLink" target="_top" href="anonymousclasses.html">Anonymous Classes</a>, shows you how to implement a base class without giving it a name.
While this is often more concise than a named class, for classes
with only one method, even an anonymous class seems a bit
heavyweight. Lambda expressions let you express instances of
single-method classes more compactly.</p>

<p>This section covers the following topics:</p>

<ul>
  <li><a href="#use-case">Ideal Use Case for Lambda Expressions</a>
    <ul>
      <li><a href="#approach1">Approach 1: Create Methods that Searches for Members that Match One Characteristic</a></li>
      <li><a href="#approach2">Approach 2: Create More Generalized Search Methods</a></li>
      <li><a href="#approach3">Approach 3: Specify Search Criteria Code in a Local Class</a></li>
      <li><a href="#approach4">Approach 4: Specify Search Criteria Code in an Anonymous Class</a></li>
      <li><a href="#approach5">Approach 5: Specify Search Criteria Code with a Lambda Expression</a></li>
      <li><a href="#approach6">Approach 6: Use Standard Functional Interfaces with Lambda Expressions</a></li>
      <li><a href="#approach7">Approach 7: Use Lambda Expressions Throughout Your Application</a></li>
    </ul>
  </li>
  <li><a href="#lambda-expressions-in-gui-applications">Lambda Expressions in GUI Applications</a></li>
  <li><a href="#syntax">Syntax of Lambda Expressions</a></li>
  <li><a href="#accessing-local-variables">Accessing Local Variables of the Enclosing Scope</a></li>
  <li><a href="#target-typing">Target Typing</a></li>
  <li><a href="#target-types-and-method-arguments">Target Types and Method Arguments</a></li>
</ul>

<h2><a name="use-case">Ideal Use Case for Lambda Expressions</a></h2>

<p>Suppose you are creating a social networking application. You
want to create a feature that enables an administrator to perform
any kind of action, such as sending a message, on members of the
social networking application that satisfy certain criteria.
Suppose that members of this social networking application are
represented by the following
<a class="SourceLink" target="_blank" href="examples/Member.java" onclick="showCode('../../displayCode.html', 'examples/Member.java'); return false;"><code>Member</code></a> class:</p>

<pre class="codeblock">public class Member {

    public enum Sex {
        MALE, FEMALE
    }

    String name;
    Date birthday;
    Sex gender;
    String emailAddress;

    public int getAge() {
        // ...
    }

    public void printMember() {
        // ...
    }
}</pre>

<p>Suppose that the members of your social networking application
are stored in a <code>List&lt;Member&gt;</code> instance.</p>

<p>This section begins with a naive approach to this use case. It improves upon this approach with local and anonymous classes, then finishes with an efficient and concise approach using lambda expressions. Find the code excerpts described in this section in the example
<a class="SourceLink" target="_blank" href="examples/RosterTest.java" onclick="showCode('../../displayCode.html', 'examples/RosterTest.java'); return false;"><code>RosterTest</code></a>.
</p>

<h3><a name="approach1">Approach 1: Create Methods that Searches for Members that Match One Characteristic</a></h3>

<p>One simplistic approach is to create several methods; each method searches for members that match one characteristic such as gender or age. The following method prints members that are older than a specified
age:</p>


<pre class="codeblock">public static void printMembersOlderThan(List&lt;member&gt; roster, int age) {
    for (member p : roster) {
        if (p.getAge() &gt;= age) {
            p.printmember();
        }
    }
}</pre>

<p><b>Note</b>: A
<a class="APILink" target="_blank" href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html"><code>List</code></a> is an ordered
<a class="APILink" target="_blank" href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html"><code>Collection</code></a>. A collection is an object
that groups multiple elements into a single unit. Collections are
used to store, retrieve, manipulate, and communicate aggregate
data. For more information about collections, see the
<a class="TutorialLink" target="_top" href="../../collections/index.html">Collections</a> trail.</p>

<p>This approach can potentially make your application brittle: Suppose you upgraded your application and changed the structure of the <code>Member</code> class such that it contains different member variables; perhaps the class records and measures ages with a different data type or algorithm. You would have to rewrite a lot of your API to accommodate this change. In addition, this approach is unnecessarily restrictive; what if you
wanted to print members younger than a certain age, for example?</p>

<!-- ********************************************************************** -->
<h3><a name="approach2">Approach 2: Create More Generalized Search Methods</a></h3>

<p>The following method is more generic than <code>printMembersOlderThan</code>; it prints members within a specified range of ages:</p>

<pre class="codeblock">public static void printMembersWithinAgeRange(
    List&lt;Member&gt; roster, int low, int high) {
    for (Member p : roster) {
        if (low &lt;= p.getAge() &amp;&amp; p.getAge() &gt; high) {
            p.printMember();
        }
    }
}</pre>


<p>What if you want to print members of a specified sex, or a
combination of a specified gender and age range? What if you
decide to change the <code>Member</code> class and add other
attributes such as relationship status or geographical location? Although this method is more generic than <code>printMembersOlderThan</code>, trying to create a separate method for each possible search
query can still lead to brittle code. You can instead separate the code that specifies the criteria for which you want to search in a different
class.</p>

<!-- ********************************************************************** -->
<h2><a name="approach3">Approach 3: Specify Search Criteria Code in a Local Class</a></h2>

<p>The following method does not contain any code that specifies search criteria:</p>

<pre class="codeblock">public void printMembers(
    List&lt;Member&gt; roster, CheckMember tester) {

    for (Member p : roster) {
        if (tester.test(p)) {
            p.printMember();
        }
    }
}</pre>

<p>To specify the search criteria, you implement the
<code>CheckMember</code> interface:</p>

<pre class="codeblock">interface CheckMember {
    boolean test(Member p);
}</pre>

<p>Instead of creating a new class, however, you can create a local class
that implements the <code>CheckMember</code> interface. The
following class filters members that are eligible for Selective
Service in the United States: those who are male and between the
ages of 18 and 25:</p>

<pre class="codeblock">class CheckMemberEligibleForSelectiveService implements CheckMember {
    public boolean test(Member p) {
        return p.getGender() == Member.Sex.MALE &amp;&amp;
            p.getAge() &gt;= 18 &amp;&amp;
            p.getAge() &lt;= 25;
    }
}</pre>

<p>To use this class, you create a new
instance of it and invoke the <code>printMembers</code> method:</p>

<pre class="codeblock">RosterTest myRosterTest = new RosterTest();
// ...
myRosterTest.printMembers(
    roster, new CheckMemberEligibleForSelectiveService());
System.out.println();</pre>

<p>Although this approach is less brittle&mdash;you don't have to rewrite methods if you change the structure of the <code>Member</code>&mdash;you still have additional code: a new interface and a local class for each search you plan to perform in your application. Because <code>CheckMemberEligibleForSelectiveService</code>
implements an interface, you can use an anonymous class
instead and bypass the need to create a new local class for each search.</p>

<!-- ********************************************************************** -->
<h3><a name="approach4">Approach 4: Specify Search Criteria Code in an Anonymous Class</a></h3>

<p>One of the arguments of the following invocation of the method <code>printMembers</code> is an anonymous class that filters members that are eligible for Selective Service in the United States: those who are male and between the ages of 18 and 25:</p>

<pre class="codeblock">myRosterTest.printMembers(
    roster, new CheckMember() {
    public boolean test(Member p) {
        return p.getGender() == Member.Sex.MALE &amp;&amp;
            p.getAge() &gt;= 18 &amp;&amp;
            p.getAge() &lt;= 25;
        }
    }
);</pre>

<p>This approach reduces the amount of code required&mdash;you don't have to create a new class for each search you want to perform. However, the syntax of anonymous classes is bulky considering that the <code>CheckMember</code> interface contains only one method. In this
case, you can use a lambda expression of an anonymous class, as
described in the next section.</p>

<!-- ********************************************************************** -->
<h3><a name="approach5">Approach 5: Specify Search Criteria Code with a Lambda Expression</a></h3>

<p>The <code>CheckMember</code>
interface is a <i>functional interface</i>. A functional
interface is any interface that contains only one method. Because
a functional interface contains only one method, you can
omit the name of that method
when you implement it. To do this, instead of using an anonymous
class expression, you use a <i>lambda
expression</i>, which is
highlighted in the following method invocation:</p>

<pre class="codeblock">myRosterTest.printMembers(
    roster,
    <b>(Member p) -&gt; p.getGender() == Member.Sex.MALE &amp;&amp;</b>
        <b>p.getAge() &gt;= 18 &amp;&amp;</b>
        <b>p.getAge() &lt;= 25</b>
    );</pre>

<p>See <a href="#syntax">Syntax of Lambda Expressions</a> for information on how to define lambda expressions.</p>

<p>We can use a standard functional interface in place of the interface <code>CheckMember</code>, which reduces even further the amount of code required.</p>

<!-- ********************************************************************** -->
<h3><a name="approach6">Approach 6: Use Standard Functional Interfaces with Lambda Expressions</a></h3>

<p>Let's revisit
the <code>CheckMember</code>
interface:</p>

<pre class="codeblock">interface CheckMember {
    boolean test(Member p);
}</pre>

<p>This is a very
simple interface. It's a functional interface because it contains
only one method. This method takes one parameter and returns a
boolean value. The method is so simple that it might not be worth
it to define one in your application. Consequently, Java SE
defines several standard functional interfaces, which you can
find in the package <code>java.util.functions</code>.</p>

<p>For example, you can use the
<code>Predicate&lt;T&gt;</code>

 interface in place of <code>CheckMember</code>. This
interface contains the method <code>boolean
test(T t)</code>:</p>


<pre class="codeblock">interface Predicate&lt;T&gt; {
    boolean test(T t);
}</pre>

<p>The interface <code>Predicate&lt;T&gt;</code> is an example of a generic interface. (For more information about generics, see the
<a class="TutorialLink" target="_top" href="../../java/generics/index.html">Generics (Updated)</a> lesson.) Generic types (such as generic interfaces) specify one or more type parameters within angle brackets (<code>&lt;&gt;</code>). This interface contains only one type parameter, <code>T</code>. When you instantiate a class that implements a generic interface, you substitute its type parameters with any type.</p>

<p>Suppose you substitute the type parameter <code>T</code> with the type <code>Member</code> in the interface <code>Predicate&lt;T&gt;</code> as follows:</p>

<pre class="codeblock">interface Predicate&lt;<code>Member</code>&gt; {
    boolean test(<code>Member</code> t);
}</pre>

<p>The result is an interface that has the same type as <code>CheckMember</code> that contains a method that has the same return type and parameters as <code>CheckMember.boolean test(Member p)</code>. Consequently, you can use <code>Predicate&lt;T&gt;</code> in place of <code>CheckMember</code> as the following method demonstrates:</p>



<pre class="codeblock">public void printMembersWithPredicate(
    List&lt;Member&gt; roster, <b>Predicate&lt;Member&gt; tester</b>) {
    for (Member p : roster) {
        if (<b>tester.test(p)</b>) {
            p.printMember();
        }
    }
}</pre>

<p>As a result,
the following method invocation is the same as when we invoked
<code>printMembers</code> to obtain members who are eligible for Selective Service:</p>

<pre class="codeblock">myRosterTest.printMembersWithPredicate(
    roster,
    p -&gt; p.getGender() == Member.Sex.MALE &amp;&amp;
        p.getAge() &gt;= 18 &amp;&amp;
        p.getAge() &lt;= 25
);</pre>

<p>This is not the only place in this method we could use a lambda expression. The following approach looks for other ways to use lambda expressions.</p>

<!-- ********************************************************************** -->
<h3><a name="approach7">Approach 7: Use Lambda Expressions Throughout Your Application</a></h3>



<p>Lambda
expressions enable you to pass a method as a parameter to another
method. Let's revisit the method <code>printMembersWithPredicate</code>
to see where else we could use
lambda expressions:</p>


<pre class="codeblock">public void printMembersWithPredicate(
    List&lt;Member&gt; roster, Predicate&lt;Member&gt; tester) {
    for (Member p : roster) {
        if (tester.test(p)) {
            p.printMember();
        }
    }
}</pre>

<p>You can replace the action performed on each <code>Member</code> instance, in this example,
<code>p.printMember()</code>, with a lambda expression. Remember, to use a lambda expression, you need to implement a functional interface. In this case, you need a functional interface that contains a method that takes one argument (an object of type <code>Member</code>) and returns void. The
<code>Block&lt;T&gt;</code>
 interface contains the method
<code>void apply(T t)</code>. The
following method replaces the invocation
<code>p.printMember()</code> with an
instance of <code>Block&lt;Member&gt;</code>:</p>


<pre class="codeblock">public void processMembers(
    List&lt;Member&gt; roster,
    Predicate&lt;Member&gt; tester,
    <b>Block&lt;Member&gt; block</b>) {
    for (Member p : roster) {
        if (tester.test(p)) {
            <b>block.apply(p);</b>
        }
    }
}</pre>

<p>As a
result, the following method invocation is the same as when we invoked <code>printMembers</code> to obtain members who are eligible for Selective Service. The lambda expression used to
print members is highlighted:</p>

<pre class="codeblock">myRosterTest.processSelectedMembers(
    roster,
    p -&gt; p.getGender() == Member.Sex.MALE &amp;&amp;
        p.getAge() &gt;= 18 &amp;&amp;
        p.getAge() &lt;= 25,
    <b>p -&gt; p.printMember()</b>
);</pre>

<p>Note that although <code>p.printMember()</code>
is a statement, not an expression, you do not have to enclose it in curly braces (<code>{}</code>). You can use a void method invocation as the body of a lambda expression.</p>


<p>What if
you wanted to do more with your members' profiles instead of
printing them out, such as validate their profiles or retrieve
their contact information? In this case, you need a functional
interface that contains a method that returns a value.
The
<code>Mapper&lt;R,T&gt;</code>
 interface contains the
method <code>R map(T
t)</code>. The following method retrieves the data
specified by the parameter <code>mapper</code>, and
then performs an action on it specified by the
parameter <code>block</code>:</p>

<pre class="codeblock">public void processMembersWithMapper(
    List&lt;Member&gt; roster,
    Predicate&lt;Member&gt; tester,
    <b>Mapper&lt;String, Member&gt; mapper</b>,
    Block&lt;String&gt; block) {
    for (Member p : roster) {
        if (tester.test(p)) {
            <b>String data = mapper.map(p);</b>
            block.apply(data);
        }
    }
}</pre>

<p>The
following method retrieves the e-mail address from each member
contained in <code>roster</code> and
then prints it:</p>

<pre class="codeblock">myRosterTest.processSelectedMembersWithMapper(
    roster,
    p -&gt; p.getGender() == Member.Sex.MALE &amp;&amp;
        p.getAge() &gt;= 18 &amp;&amp;
        p.getAge() &lt;= 25,
    <b>p -&gt; p.getEmailAddress()</b>,
    email -&gt; System.out.println(email)
);</pre>

<h2><a name="lambda-expressions-in-gui-applications">Lambda Expressions in GUI Applications</a></h2>

<p>To process events in a GUI application, such as keyboard
actions, mouse actions, and scroll actions, you typically create
event handlers, which usually involves implementing a particular
interface. Often, event handler interfaces are functional
interfaces; they tend to have only one method.</p>

<p>In the JavaFX example <a href=
"http://docs.oracle.com/javafx/2/get_started/hello_world.htm">
<code>HelloWorld.java</code></a> discussed in the previous section
<a class="TutorialLink" target="_top" href="anonymousclasses.html">Anonymous Classes</a>, you can
replace the anonymous class with a lambda expression in this
statement:</p>

<pre class="codeblock">        btn.setOnAction(<b>new EventHandler&lt;ActionEvent&gt;() {</b>

            <b>@Override</b>
            <b>public void handle(ActionEvent event) {</b>
                <b>System.out.println("Hello World!");</b>
            <b>}</b>
        <b>}</b>);</pre>

<p>The method invocation <code>btn.setOnAction</code> specifies what
happens when you select the button represented by the <code>btn</code> object. This method requires
an object of type <code>EventHandler&lt;ActionEvent&gt;</code>. The <code>EventHandler&lt;ActionEvent&gt;</code>
interface contains only one method, <code>void handle(T event)</code>.
This interface is a functional interface, so you could use a
lambda expression:</p>

<pre class="codeblock">        btn.setOnAction(
          <b>event -&gt; System.out.println("Hello World!")</b>
        );</pre>

<h2><a name="syntax">Syntax of Lambda Expressions</a></h2>

<p>A lambda expression consists of the following:</p>

<ul>
  <li><p>A
comma-separated list of formal parameters enclosed in
parentheses; the <code>CheckMember.test</code> method contains one parameter,
<code>p</code>, which represents an instance of the
<code>Member</code> class.</p>
  <p><b>Note</b>: You may
omit the data type of the parameters in a lambda expression. In
addition, you may omit the parentheses if there is only one
parameter. For example, the following lambda expression is also
valid:</p>

<pre class="codeblock">p -&gt; p.getGender() == Member.Sex.MALE &amp;&amp;
    p.getAge() &gt;= 18 &amp;&amp;
    p.getAge() &lt;= 25</pre></li>

  <li><p>The arrow token, <code>-&gt;</code></p></li>
  <li><p>A
body, which consists of a single expression or a statement block;
this example uses this expression:</p>

<pre class="codeblock">p.getGender() == Member.Sex.MALE &amp;&amp;
    p.getAge() &gt;= 18 &amp;&amp;
    p.getAge() &lt;= 25</pre>

  <p>If you
specify a single expression, the Java runtime evaluates the
expression and then returns its value. Alternatively, you can use
a return statement:</p>

<pre class="codeblock">p -&gt; {
    return p.getGender() == Member.Sex.MALE
        &amp;&amp; p.getAge() &gt;= 18
        &amp;&amp; p.getAge() &lt;= 25;
}</pre>

  <p>Note that
a return statement is not an expression; in a lambda expression,
you must enclose statements in curly braces (<code>{}</code>). However, you do not have to enclose a void method invocation in curly braces. For example, the following is a valid lambda expression:</p>

<pre class="codeblock">email -&gt; System.out.println(email)</pre>
</li>

</ul>

<p>Note that a lambda expression looks a lot like a method
declaration; you can consider lambda expressions as anonymous
methods&mdash;methods without a name.</p>

<p>The following example,
<a class="SourceLink" target="_blank" href="examples/Calculator.java" onclick="showCode('../../displayCode.html', 'examples/Calculator.java'); return false;"><code>Calculator</code></a> is an example of lambda expressions that take
more than one formal parameter:</p>

<pre class="codeblock">

public class Calculator {
  
    interface IntegerMath {
        int operation(int a, int b);   
    }
  
    public int operateBinary(int a, int b, IntegerMath op) {
        return op.operation(a, b);
    }
 
    public static void main(String... args) {
    
        Calculator myApp = new Calculator();
        IntegerMath addition = (a, b) -&gt; a + b;
        IntegerMath subtraction = (a, b) -&gt; a - b;
        System.out.println(&quot;40 + 2 = &quot; +
            myApp.operateBinary(40, 2, addition));
        System.out.println(&quot;20 - 10 = &quot; +
            myApp.operateBinary(20, 10, subtraction));    
    }
}

</pre>

<p>The method <code>operateBinary</code> performs a
mathematical operation on two integer operands. The operation
itself is specified by an instance of <code>IntegerMath</code>. The example defines two operations with lambda expressions, <code>addition</code> and <code>subtraction</code>. The example prints
the following:</p>

<pre class="codeblock">40 + 2 = 42
20 - 10 = 10</pre>


<h2><a name="accessing-local-variables">Accessing Local Variables of the Enclosing Scope</a></h2>

<p>Lambda expressions have the same
access to local variables of the enclosing scope as local and
anonymous classes. However, unlike local and anonymous classes, lambda expressions do not have any shadowing issues (see
<a class="TutorialLink" target="_top" href="../../java/javaOO/nested.html#shadowing">Shadowing</a> for more information). Lambda expressions are lexically scoped. This means that they do not inherit any names from a supertype nor introduce a new level of scoping. Declarations in a lambda expression are interpreted just as they are in the enclosing environment. The following example,
<a class="SourceLink" target="_blank" href="examples/LambdaScopeTest.java" onclick="showCode('../../displayCode.html', 'examples/LambdaScopeTest.java'); return false;"><code>LambdaScopeTest</code></a> demonstrates this:</p>

<pre class="codeblock">

import java.util.functions.Block;

public class LambdaScopeTest {

    public int x = 0;

    class FirstLevel {

        public int x = 1;

        void methodInFirstLevel(int x) {
            
            // The following statement causes the compiler to generate
            // the error &quot;local variables referenced from a lambda expression
            // must be final or effectively final&quot; in statement A:
            //
            // x = 99;
            
            Block&lt;Integer&gt; myBlock = (y) -&gt; 
            {
                System.out.println(&quot;x = &quot; + x); // Statement A
                System.out.println(&quot;y = &quot; + y);
                System.out.println(&quot;this.x = &quot; + this.x);
                System.out.println(&quot;LambdaScopeTest.this.x = &quot; +
                    LambdaScopeTest.this.x);
            };

            myBlock.apply(x);

        }
    }

    public static void main(String... args) {
        LambdaScopeTest st = new LambdaScopeTest();
        LambdaScopeTest.FirstLevel fl = st.new FirstLevel();
        fl.methodInFirstLevel(23);
    }
}
</pre>

<p>This example generates the following output:</p>

<pre class="codeblock">
x = 23
y = 23
this.x = 1
LambdaScopeTest.this.x = 0</pre>

<p>If you substitute the parameter <code>x</code> in place of <code>y</code> in the declaration of the lambda expression <code>myBlock</code>, the compiler generates an error:</p>

<pre class="codeblock">Block&lt;Integer&gt; myBlock = (y) -> {
    // ...
}</pre>

<p>The compiler generates the error, "variable x is already defined in method methodInFirstLevel(int)" because the lambda expression does not introduce a new level of scoping. Consequently, you can directly access fields, methods, and local variables of the enclosing scope. For example, the lambda expression directly accesses the parameter <code>x</code> of the method <code>methodInFirstLevel</code>. To access variables in the enclosing class, use the keyword <code>this</code>. In this example, <code>this.x</code> refers to the member variable <code>FirstLevel.x</code>.</p>

<p>However, like local and anonymous classes, a lambda expression can only access local variables and parameters of the enclosing block that are final or
effectively final. For example, suppose you add
the following assignment statement immediately after the <code>methodInFirstLevel</code> definition statement as follows:</p>

<pre class="codeblock">void methodInFirstLevel(int x) {
    <strong>x = 99;</strong>
    // ...
}</pre>

<p>Because of this assignment
statement, the variable <code>FirstLevel.x</code> is not effectively final anymore. As a result, the Java compiler generates an error message similar to
"local variables referenced from a lambda expression must be final or effectively final" where the lambda expression <code>myBlock</code> tries to access the <code>FirstLevel.x</code> variable:</p>

<pre class="codeblock">System.out.println("x = " + x);</pre>

<h2><a name="target-typing">Target Typing</a></h2>
<p>How do you determine the type of a lambda expression? Recall
the lambda expression that selected members who are male and
between the ages 18 and 25 years:</p>

<pre class="codeblock">p -&gt; p.getGender() == Member.Sex.MALE
    &amp;&amp; p.getAge() &gt;= 18
    &amp;&amp; p.getAge() &lt;= 25</pre>

<p>Recall that we used the same lambda
expression in the following two methods:</p>

<ul>

<li><p><code>public void printMembers(List&lt;Member&gt; roster, CheckMember tester)</code></p></li>

<li><p><code>public void printMembersWithPredicate(List&lt;Member&gt; roster, Predicate&lt;Member&gt; tester)</code></p></li>

</ul>

<p>When the Java runtime invokes the method <code>printMembers</code>, it's expecting a data type of <code>CheckMember</code>, so the
lambda expression is of this type. However,
when the Java runtime invokes the method <code>printMembersWithPredicate</code>,
it's expecting a data type of <code>Predicate&lt;Member&gt;</code>,
so the lambda expression is of this type. The data type that
these methods expect is called the <em>target type</em>. To determine the type of a lambda
expression, the Java compiler uses the target type of the context
or situation in which the lambda expression was found. It follows
that you can only use lambda expressions in situations in which
the Java compiler can determine a target type:</p>

<ul>
  <li><p>Variable declarations</p></li>
  <li><p>Assignments</p></li>
  <li><p>Return statements</p></li>
  <li><p>Array initializers</p></li>
  <li><p>Method or constructor arguments</p></li>
  <li><p>Lambda expression bodies</p></li>
  <li><p>Conditional expressions, <code>?:</code></p></li>
  <li><p>Cast expressions</p></li>
</ul>

<h3><a name="target-types-and-method-arguments">Target Types and Method Arguments</a></h3>

<p>For method arguments, the Java compiler determines the target
type with two other language features: overload resolution and
type argument inference.</p>

<p>Consider the following two functional interfaces,
<a class="APILink" target="_blank" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html"><code>java.lang.Runnable</code></a>, and
<a class="APILink" target="_blank" href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html"><code>java.util.concurrent.Callable&lt;V&gt;</code></a>:</p>

<pre class="codeblock">public interface Runnable {
    void run();
}

public interface Callable&lt;V&gt; {
    V call();
}</pre>

<p>The method <code>Runnable.run</code> does not return a value while <code>Callable&lt;V&gt;.call</code> does.</p>

<p>Suppose you have overloaded the method <code>invoke</code> as follows.
(Overloaded methods are those that have the same name, belong to
the same class, but have different parameter lists or return
values. See
<a class="TutorialLink" target="_top" href="methods.html">Defining Methods</a> for more information):</p>

<pre class="codeblock">void invoke(Runnable r) {
    r.run();
}

&lt;T&gt; T invoke(Callable&lt;T&gt; c) {
    return c.call();
}</pre>

<p>Which method will be invoked in the following statement?</p>

<pre class="codeblock">String s = invoke(() -&gt; "done");</pre>

<p>The method <code>invoke(Callable&lt;T&gt;)</code> will be
invoked because that method returns a value; the method
<code>invoke(Runnable)</code> does not. In this case, the type of the lambda expression <code>() -&gt; "done"</code> is <code>Callable&lt;T&gt;</code>.</p>



        </div>
        <div class="NavBit">
            <a target="_top" href="anonymousclasses.html">&laquo; Previous</a>
            &bull;
            <a target="_top" href="../TOC.html">Trail</a>
            &bull;
            <a target="_top" href="whentouse.html">Next &raquo;</a>
        </div>
    </div>
    <div id="Footer2">
<hr />
<div id="TagNotes">
    <p class="footertext">Problems with the examples? Try <a target="_blank"
        href="../../information/run-examples.html">Compiling and Running
        the Examples: FAQs</a>.
    <br />
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://docs.oracle.com/javase/feedback.html">Give
    us your feedback</a>.
    </p>
</div> 

<div id="Footer">
<p class="footertext"><a name="license_info">Your use of this</a> page and all the material on pages under &quot;The Java Tutorials&quot; banner 
 is subject to these <a href="../../information/cpyr.html">legal notices</a>.
</p>
<table border="0" cellspacing="0" cellpadding="5" summary="">
    <tr>
         <td width="20%">
	 <table width="100%" border="0" cellspacing="0" cellpadding="5">
            <tr>
              <td headers="h1" align="center"><img id="duke" src="../../images/DukeWave.gif" width="55" height="55" alt="duke image" /></td>
              <td headers="h2" align="left" valign="middle"><img id="oracle" src="../../images/logo_oracle_footer.gif" width="100" height="29" alt="Oracle logo" /></td>
           </tr>
          </table>
          </td>

          <td width="55%" valign="middle" align="center">
		<p class="footertext"><a href="http://www.oracle.com/us/corporate/index.html">About Oracle</a> | <a href="http://www.oracle.com/technology/index.html">Oracle Technology Network</a> | <a href="http://www.oracle.com/us/legal/terms/index.html">Terms of Use</a></p> 
	 </td>
          <td width="25%" valign="middle" align="right">
      		<p class="footertext">Copyright &copy; 1995, 2013 Oracle and/or its affiliates. All rights reserved.</p>
	 </td>
     </tr>     
</table>
</div>
    </div>
    <div class="PrintHeaders">
        <b>Previous page:</b> Anonymous Classes
        <br /><b>Next page:</b> When To Use Nested Classes, Local Classes, Anonymous Classes, and Lambda Expressions 
    </div>
<!-- Start SiteCatalyst code   -->
<script type="text/javascript" language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code_download.js"></script>
<script type="text/javascript" language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code.js"></script>
<noscript>
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>

<!-- ********** DO NOT ALTER ANYTHING BELOW THIS LINE ! *********** -->
<!--  Below code will send the info to Omniture server -->
<script type="text/javascript" language="javascript">var s_code=s.t();if(s_code)document.write(s_code)</script>

<!-- End SiteCatalyst code -->
</body>
</html> 
